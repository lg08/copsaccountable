{% if commentstack %}
    {% load custom_tags %}
    {% load bootstrap4 %}

    {% pop_item_from_stack commentstack as comment %}

    <div class="media border-left border-right border-dark rounded my-3 px-3">
        <div class="media-body">

            <div class="row">
                <div class="col-10"> <!--left column-->
                    <div class="col-12"><p>{{ comment.message }}</p></div>
                    <div class="col-12"><p>by: {{ comment.user }} at: {{ comment.created_at }}</p></div>
                </div>
                <div class="col"> <!--right column-->
                    {% if user.is_authenticated %} <!--toggles comment form-->
                        <button class="btn btn-link btn-sm text-muted border-0 reply-button" type="button" data-toggle="collapse" data-target=".form-collapse-{{ comment.pk }}" aria-expanded="false" aria-controls="multiCollapseExample1 multiCollapseExample2">
                            {% include 'posts/addons/reply-button.html' %}
                        </button>
                    {% else %} <!--just redirects to login page-->
                        <form action="{% url 'accounts:login' %}" method="POST">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-link btn-sm text-muted border-0 reply-button">
                                {% include 'posts/addons/reply-button.html' %}
                            </button>
                        </form>
                    {% endif %}
                </div>  <!--col-->
                <div class="col-12">
                    <p> <!--individual comment forms-->
                        <form action="{% url 'posts:create_comment' postpk=post.pk commentpk=comment.pk subcomment=1 %}" method="POST" class="collapse form-collapse-{{ comment.pk }}">
                            {% bootstrap_form comment_form %}
                            {% csrf_token %}
                            <button type="submit" class="btn btn-secondary">Submit</button>
                        </form>
                    </p>                
                </div>
            </div>      <!--row-->
            
            

            <!-- adds all subcomments to stack -->
            {% for subcomment in comment.comment_comments.all %}
                {% push_item_onto_stack commentstack subcomment %}
                {% include 'posts/comment.html' %}
            {% empty %}
            {% endfor %}

        </div>          <!--media body-->
    </div>              <!--media border-->
    
    {#% include 'posts/comment.html' %#}
{% else %}
{% endif %}


<style>
 /*  the screen size is 601px wide or more, set the font-size of <div> to 80px */
 @media screen and (min-width: 1100px) {
     .reply-button {
         width: 3em;
     }
 }

 /* If the screen size is 600px wide or less, set the font-size of <div> to 30px */
 @media screen and (max-width: 1100px) {
     .reply-button {
         width: 3em;
     }
 }
</style>
